<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Suwit Jawa v2.0</h1>

    <div class="container">
        <div class="area-komputer">
            <img src="img/gajah.png" class="img-komputer">
        </div>
        <div class="info"></div>
        <div class="area-player">
            <ul>
                <li>
                    <img src="img/gajah.png" class="gajah">
                </li>
                <li>
                    <img src="img/orang.png" class="orang">
                </li>
                <li>
                    <img src="img/semut.png" class="semut">
                </li>
            </ul>
        </div>
    </div> 

    <script>
        function computerChoose() {
            const comp = Math.random();
            if(comp < 0.34 ) return 'gajah';
            if(comp >= 0.34 && comp < 0.67 ) return 'orang';
            return 'semut';
        }

        function getReturn(comp, player) {
            
            if( player == comp ) return 'SERI';
            if( player == 'gajah' ) return ( comp == 'orang') ? 'MENANG' : 'KALAH!';
            if( player == 'orang' ) return ( comp == 'gajah') ? 'MENANG' : 'KALAH!';
            if( player == 'semut' ) return ( comp == 'orang') ? 'MENANG' : 'KALAH!';

        }

        function loopImg() {
            const imgComputer = document.querySelector('.img-komputer');
            const img = ['gajah', 'semut', 'orang'];
            const timeStart = new Date().getTime();
            let i = 0;
            const info = document.querySelector('.info');
            info.innerHTML = '';
            setInterval(() => {

                if(new Date().getTime() - timeStart > 1000) {
                    clearInterval;
                    return;
                }
                
                imgComputer.setAttribute('src', 'img/' + img[i++] + '.png');

                if( i == img.length ) { i = 0 };

            }, 100);
        }

        const choices = document.querySelectorAll('li img');
        choices.forEach(function(img) {
            img.addEventListener('click', function() {
                const compChoice = computerChoose();
                const choosePlayer = img.className;
                const result = getReturn(compChoice, choosePlayer);

                loopImg();
                
                setTimeout(() => {
                    const imgComp = document.querySelector('.img-komputer');
                    imgComp.setAttribute('src', 'img/' + compChoice + '.png');
                    const info = document.querySelector('.info');
                    info.innerHTML = result;
                }, 1000);

                
            });
        });

        
        // event handler
        // // people handler
        // const ant = document.querySelector('.semut');
        // ant.addEventListener('click', function() {
        //     const compChoice = computerChoose();
        //     const choosePlayer = ant.className;
        //     const result = getReturn(compChoice, choosePlayer);
            
        //     const imgComp = document.querySelector('.img-komputer');
        //     imgComp.setAttribute('src', 'img/' + compChoice + '.png');
        //     const info = document.querySelector('.info');
        //     info.innerHTML = result;
        // });

        // // people handler
        // const poeple = document.querySelector('.orang');
        // poeple.addEventListener('click', function() {
        //     const compChoice = computerChoose();
        //     const choosePlayer = poeple.className;
        //     const result = getReturn(compChoice, choosePlayer);
            
        //     const imgComp = document.querySelector('.img-komputer');
        //     imgComp.setAttribute('src', 'img/' + compChoice + '.png');
        //     const info = document.querySelector('.info');
        //     info.innerHTML = result;
        // });

        // const elephant = document.querySelector('.gajah');
        // elephant.addEventListener('click', function() {
        //     const compChoice = computerChoose();
        //     const choosePlayer = elephant.className;
        //     const result = getReturn(compChoice, choosePlayer);
            
        //     const imgComp = document.querySelector('.img-komputer');
        //     imgComp.setAttribute('src', 'img/' + compChoice + '.png');
        //     const info = document.querySelector('.info');
        //     info.innerHTML = result;
        // });

    </script>

</body>
</html>